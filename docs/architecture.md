# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Actions (Scheduler)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cron Triggers (UTC)                                 â”‚  â”‚
â”‚  â”‚  â€¢ 00:15 (JST 09:15) - Morning                       â”‚  â”‚
â”‚  â”‚  â€¢ 00:30 (JST 09:30) - Morning                       â”‚  â”‚
â”‚  â”‚  â€¢ 03:00 (JST 12:00) - Morning                       â”‚  â”‚
â”‚  â”‚  â€¢ 03:45 (JST 12:45) - Afternoon                     â”‚  â”‚
â”‚  â”‚  â€¢ 05:30 (JST 14:30) - Afternoon                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Python Runtime Environment                          â”‚  â”‚
â”‚  â”‚  â€¢ Python 3.11                                       â”‚  â”‚
â”‚  â”‚  â€¢ Dependencies from requirements.txt                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. å–¶æ¥­æ—¥ãƒã‚§ãƒƒã‚¯ (check_workday.py)                â”‚  â”‚
â”‚  â”‚     â”œâ”€ åœŸæ—¥åˆ¤å®š                                       â”‚  â”‚
â”‚  â”‚     â””â”€ ç¥æ—¥åˆ¤å®š (jpholiday)                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚                      [å–¶æ¥­æ—¥ã®å ´åˆ]                          â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  2. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè¡Œ (scrape_rankings.py)          â”‚  â”‚
â”‚  â”‚     â”œâ”€ æ™‚åˆ»åˆ¤å®š (æœ or åˆå¾Œ)                         â”‚  â”‚
â”‚  â”‚     â”œâ”€ HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ (User-Agentè¨­å®š)               â”‚  â”‚
â”‚  â”‚     â”œâ”€ HTMLãƒ‘ãƒ¼ã‚¹ (BeautifulSoup)                    â”‚  â”‚
â”‚  â”‚     â””â”€ ãƒ‡ãƒ¼ã‚¿æŠ½å‡º (ãƒ™ã‚¹ãƒˆ10)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  3. ãƒ‡ãƒ¼ã‚¿ä¿å­˜                                        â”‚  â”‚
â”‚  â”‚     â””â”€ JSONå½¢å¼ã§ data/ é…ä¸‹ã«ä¿å­˜                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  4. Gitæ“ä½œ                                           â”‚  â”‚
â”‚  â”‚     â”œâ”€ git add data/                                  â”‚  â”‚
â”‚  â”‚     â”œâ”€ git commit                                     â”‚  â”‚
â”‚  â”‚     â””â”€ git push                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  5. é€šçŸ¥é€ä¿¡ (notify_line.py)                        â”‚  â”‚
â”‚  â”‚     â””â”€ LINE Notify API                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repositoryâ”‚                 â”‚   LINE Notify   â”‚
â”‚   (Data Storage)  â”‚                 â”‚  (User's Phone) â”‚
â”‚                   â”‚                 â”‚                 â”‚
â”‚  data/            â”‚                 â”‚  ğŸ“± é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â”‚
â”‚  â”œâ”€ morning/      â”‚                 â”‚  ã€Œãƒ©ãƒ³ã‚­ãƒ³ã‚°    â”‚
â”‚  â””â”€ afternoon/    â”‚                 â”‚   å–å¾—å®Œäº†ã€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 1. check_workday.py
**è²¬å‹™**: å–¶æ¥­æ—¥ï¼ˆå–å¼•æ—¥ï¼‰ã®åˆ¤å®š

```python
# å…¥åŠ›: datetime.date
# å‡ºåŠ›: bool (True = å–¶æ¥­æ—¥, False = ä¼‘æ—¥)
```

**åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**:
1. åœŸæ›œæ—¥ï¼ˆweekday=5ï¼‰â†’ False
2. æ—¥æ›œæ—¥ï¼ˆweekday=6ï¼‰â†’ False
3. jpholiday.is_holiday() â†’ False
4. ä¸Šè¨˜ä»¥å¤– â†’ True

**ä¾å­˜é–¢ä¿‚**:
- `datetime` (æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
- `jpholiday` (å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)

---

### 2. scrape_rankings.py
**è²¬å‹™**: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨JSONä¿å­˜

**ä¸»è¦é–¢æ•°**:

```python
def is_trading_day() -> bool
    """å–¶æ¥­æ—¥ã‹ã©ã†ã‹ã‚’åˆ¤å®š"""

def get_current_time_slot() -> Optional[str]
    """ç¾åœ¨æ™‚åˆ»ã‹ã‚‰å–å¾—å¯¾è±¡ã‚’åˆ¤å®š ('morning' or 'afternoon')"""

def scrape_ranking(url: str) -> List[Dict]
    """URLã‹ã‚‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"""
    # User-Agentè¨­å®š
    # ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
    # HTMLãƒ‘ãƒ¼ã‚¹
    # ãƒ‡ãƒ¼ã‚¿æŠ½å‡º

def save_to_json(data: Dict, target: str) -> str
    """JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜"""
    # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ç”Ÿæˆ
    # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
    # JSONæ›¸ãè¾¼ã¿

def main()
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"""
```

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
```
1. is_trading_day() â†’ å–¶æ¥­æ—¥ãƒã‚§ãƒƒã‚¯
2. get_current_time_slot() â†’ æ™‚é–“å¸¯åˆ¤å®š
3. scrape_ranking(url) â†’ ãƒ‡ãƒ¼ã‚¿å–å¾—
4. save_to_json(data) â†’ ä¿å­˜
5. notify_line(message) â†’ é€šçŸ¥
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- `requests.exceptions.RequestException` â†’ ãƒªãƒˆãƒ©ã‚¤
- `requests.exceptions.Timeout` â†’ ãƒªãƒˆãƒ©ã‚¤
- `AttributeError` (HTMLæ§‹é€ å¤‰æ›´) â†’ ã‚¨ãƒ©ãƒ¼é€šçŸ¥
- ãã®ä»–ã®ä¾‹å¤– â†’ ã‚¨ãƒ©ãƒ¼é€šçŸ¥

---

### 3. notify_line.py
**è²¬å‹™**: LINE Notifyã¸ã®é€šçŸ¥é€ä¿¡

**ä¸»è¦é–¢æ•°**:

```python
def send_line_notify(message: str, token: str) -> bool
    """LINE Notifyã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡"""
    # LINE Notify APIå‘¼ã³å‡ºã—
    # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ç¢ºèª
    # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
```
[æˆåŠŸ] 2025-10-20 09:15
æœãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—å®Œäº†
ãƒ™ã‚¹ãƒˆ3:
1. éŠ˜æŸ„A (1234)
2. éŠ˜æŸ„B (5678)
3. éŠ˜æŸ„C (9012)
```

---

### 4. GitHub Actions Workflow
**è²¬å‹™**: å®šæ™‚å®Ÿè¡Œã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `.github/workflows/scrape_rankings.yml`

**ä¸»è¦è¨­å®š**:
- **Trigger**: cron (5ã¤ã®æ™‚åˆ»)
- **Runner**: ubuntu-latest
- **Timeout**: 15åˆ†
- **Steps**:
  1. Checkout
  2. Python Setup (3.11)
  3. Install Dependencies
  4. Run Scraper
  5. Commit & Push
  6. (å¤±æ•—æ™‚) Error Notification

---

## ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢è¨­è¨ˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
data/
â”œâ”€â”€ morning/
â”‚   â”œâ”€â”€ ranking_20251020_0915.json
â”‚   â”œâ”€â”€ ranking_20251020_0930.json
â”‚   â”œâ”€â”€ ranking_20251020_1200.json
â”‚   â”œâ”€â”€ ranking_20251021_0915.json
â”‚   â””â”€â”€ ...
â””â”€â”€ afternoon/
    â”œâ”€â”€ ranking_20251020_1245.json
    â”œâ”€â”€ ranking_20251020_1430.json
    â”œâ”€â”€ ranking_20251021_1245.json
    â””â”€â”€ ...
```

### JSONã‚¹ã‚­ãƒ¼ãƒ

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "datetime": {
      "type": "string",
      "pattern": "^\\d{8}_\\d{4}$",
      "description": "YYYYMMdd_HHmmå½¢å¼"
    },
    "url": {
      "type": "string",
      "format": "uri"
    },
    "scraped_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601å½¢å¼ï¼ˆJSTï¼‰"
    },
    "rankings": {
      "type": "array",
      "maxItems": 10,
      "items": {
        "type": "object",
        "properties": {
          "rank": {"type": "string"},
          "code": {"type": "string"},
          "name": {"type": "string"},
          "price": {"type": "string"},
          "change": {"type": "string"},
          "change_percent": {"type": "string"},
          "volume": {"type": "string"},
          "value": {"type": "string"}
        },
        "required": ["rank", "code", "name"]
      }
    }
  },
  "required": ["datetime", "url", "scraped_at", "rankings"]
}
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 1. æ©Ÿå¯†æƒ…å ±ã®ç®¡ç†

**GitHub Secrets**:
```
LINE_NOTIFY_TOKEN: xxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦åˆ©ç”¨**:
```python
import os
LINE_TOKEN = os.environ.get('LINE_NOTIFY_TOKEN')
```

### 2. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- GitHub Actionsã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã¯ main ãƒ–ãƒ©ãƒ³ãƒã®ã¿
- Personal Access Token ã¯ä½¿ç”¨ã—ãªã„ï¼ˆGITHUB_TOKEN ã‚’ä½¿ç”¨ï¼‰

### 3. å…¥åŠ›æ¤œè¨¼
- URLã¯å®šæ•°ã¨ã—ã¦å®šç¾©ï¼ˆå¤–éƒ¨å…¥åŠ›ãªã—ï¼‰
- HTMLãƒ‘ãƒ¼ã‚¹æ™‚ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†æ¸ˆã¿ã®BeautifulSoupã‚’ä½¿ç”¨

---

## ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è€ƒæ…®

### ç¾åœ¨ã®åˆ¶ç´„
- GitHub Actions: æœˆ2,000åˆ†ã¾ã§ç„¡æ–™
- 1å›ã®å®Ÿè¡Œ: ç´„1-2åˆ†
- 1æ—¥5å› Ã— ç´„20å–¶æ¥­æ—¥/æœˆ = ç´„100å›/æœˆ
- **æœˆé–“ä½¿ç”¨æ™‚é–“**: ç´„100-200åˆ† â†’ ååˆ†ã«ä½™è£•ã‚ã‚Š

### å°†æ¥ã®æ‹¡å¼µ
1. **å–å¾—é »åº¦ã®å¢—åŠ **: åˆ†å˜ä½ã§ã®å–å¾—ã‚‚å¯èƒ½
2. **è¤‡æ•°å¸‚å ´å¯¾å¿œ**: æ±è¨¼ä»¥å¤–ã®å¸‚å ´ã‚‚è¿½åŠ å¯èƒ½
3. **ãƒ‡ãƒ¼ã‚¿åˆ†ææ©Ÿèƒ½**: åˆ¥ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§é›†è¨ˆãƒ»åˆ†æ
4. **Webhooké€šçŸ¥**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®å·®åˆ†é€šçŸ¥

---

## å¯ç”¨æ€§ãƒ»ä¿¡é ¼æ€§è¨­è¨ˆ

### 1. ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥

```python
# æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•
retry_delays = [5, 10, 20]  # ç§’
max_retries = 3

for attempt in range(max_retries):
    try:
        response = requests.get(url, headers=headers, timeout=30)
        response.raise_for_status()
        break
    except requests.exceptions.RequestException as e:
        if attempt < max_retries - 1:
            time.sleep(retry_delays[attempt])
        else:
            # ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã—ã¦çµ‚äº†
            raise
```

### 2. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
- **HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: 30ç§’
- **GitHub Actionsã‚¸ãƒ§ãƒ–å…¨ä½“**: 15åˆ†

### 3. ã‚¨ãƒ©ãƒ¼é€šçŸ¥
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¤±æ•— â†’ LINEé€šçŸ¥
- HTMLæ§‹é€ å¤‰æ›´æ¤œçŸ¥ â†’ LINEé€šçŸ¥
- GitHub Actionså¤±æ•— â†’ GitHubãƒ¡ãƒ¼ãƒ«é€šçŸ¥

### 4. ãƒ­ã‚°è¨˜éŒ²
- æ¨™æº–å‡ºåŠ›ã«å®Ÿè¡Œãƒ­ã‚°å‡ºåŠ›
- GitHub Actionsä¸Šã§ç¢ºèªå¯èƒ½
- ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚‚è¨˜éŒ²

---

## ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»é‹ç”¨

### 1. å®Ÿè¡Œçµæœã®ç¢ºèªæ–¹æ³•

**GitHub Actionsç”»é¢**:
- Workflow runs ã§å®Ÿè¡Œå±¥æ­´ç¢ºèª
- ãƒ­ã‚°è©³ç´°ã®é–²è¦§
- å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼å†…å®¹ç¢ºèª

**LINEé€šçŸ¥**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æˆåŠŸãƒ»å¤±æ•—ã‚’ç¢ºèª
- ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§å³åº§ã«æŠŠæ¡

**Gitã‚³ãƒŸãƒƒãƒˆå±¥æ­´**:
- data/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã§å–å¾—çŠ¶æ³ç¢ºèª
- ãƒ•ã‚¡ã‚¤ãƒ«æ•° = å–å¾—æˆåŠŸå›æ•°

### 2. ã‚¢ãƒ©ãƒ¼ãƒˆæ¡ä»¶

| æ¡ä»¶ | ã‚¢ãƒ©ãƒ¼ãƒˆæ–¹æ³• | å„ªå…ˆåº¦ |
|------|-------------|--------|
| ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¤±æ•—ï¼ˆ3å›ãƒªãƒˆãƒ©ã‚¤å¾Œï¼‰ | LINEé€šçŸ¥ | é«˜ |
| HTMLæ§‹é€ å¤‰æ›´æ¤œçŸ¥ | LINEé€šçŸ¥ | é«˜ |
| GitHub Actionså¤±æ•— | GitHubãƒ¡ãƒ¼ãƒ« | ä¸­ |
| å–¶æ¥­æ—¥ã‚¹ã‚­ãƒƒãƒ— | ãƒ­ã‚°ã®ã¿ | ä½ |

### 3. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä½œæ¥­

**å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹**:
- æœˆ1å›: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèª
- å››åŠæœŸ1å›: HTMLæ§‹é€ ã®å¤‰æ›´ç¢ºèª
- å¹´1å›: ç¥æ—¥ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ç¢ºèªï¼ˆjpholidayãŒè‡ªå‹•å¯¾å¿œï¼‰

**éšœå®³ç™ºç”Ÿæ™‚**:
1. LINEé€šçŸ¥ã§æ°—ã¥ã
2. GitHub Actions ãƒ­ã‚°ã‚’ç¢ºèª
3. åŸå› ç‰¹å®šï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/HTMLæ§‹é€ å¤‰æ›´/ãã®ä»–ï¼‰
4. å¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ¼ãƒ‰ä¿®æ­£
5. ä¿®æ­£å¾Œã€æ‰‹å‹•å®Ÿè¡Œã§å‹•ä½œç¢ºèª

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### 1. å®Ÿè¡Œæ™‚é–“ç›®æ¨™
- å–¶æ¥­æ—¥åˆ¤å®š: < 0.1ç§’
- HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ: < 5ç§’
- HTMLãƒ‘ãƒ¼ã‚¹: < 1ç§’
- JSONä¿å­˜: < 0.5ç§’
- LINEé€šçŸ¥: < 2ç§’
- **åˆè¨ˆ**: < 10ç§’ï¼ˆæ­£å¸¸æ™‚ï¼‰

### 2. æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ
- **lxml ãƒ‘ãƒ¼ã‚µãƒ¼ä½¿ç”¨**: html.parserã‚ˆã‚Šé«˜é€Ÿ
- **å¿…è¦ãªè¦ç´ ã®ã¿æŠ½å‡º**: å…¨HTMLã‚’ä¿å­˜ã—ãªã„
- **ä¸¦åˆ—å‡¦ç†ãªã—**: 1ã¤ã®URLã®ã¿ãªã®ã§ä¸è¦

### 3. ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡
- **ãƒ¡ãƒ¢ãƒª**: < 100MB
- **CPU**: è»½å¾®ï¼ˆãƒ‘ãƒ¼ã‚¹å‡¦ç†ã®ã¿ï¼‰
- **ãƒ‡ã‚£ã‚¹ã‚¯**: 1ãƒ•ã‚¡ã‚¤ãƒ«ç´„5-10KB
  - 1æ—¥5ãƒ•ã‚¡ã‚¤ãƒ« Ã— 20å–¶æ¥­æ—¥ Ã— 12ãƒ¶æœˆ = ç´„1,200ãƒ•ã‚¡ã‚¤ãƒ«/å¹´
  - ç´„6-12MB/å¹´ â†’ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å•é¡Œãªã—

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆä»Šå¾Œè¿½åŠ æ¤œè¨ï¼‰
- `check_workday.py`: åœŸæ—¥ç¥åˆ¤å®šã®ãƒ†ã‚¹ãƒˆ
- `scrape_rankings.py`: HTMLãƒ‘ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯HTMLä½¿ç”¨ï¼‰
- `notify_line.py`: APIå‘¼ã³å‡ºã—ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä½¿ç”¨ï¼‰

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ
- **æ‰‹å‹•å®Ÿè¡Œ**: workflow_dispatch ã§å‹•ä½œç¢ºèª
- **å®Ÿéš›ã®ãƒšãƒ¼ã‚¸å–å¾—**: æœ¬ç•ªURLã§å‹•ä½œç¢ºèª

### 3. æœ¬ç•ªç›£è¦–
- æ¯æ—¥ã®å®Ÿè¡Œçµæœã‚’ LINEé€šçŸ¥ ã§ç¢ºèª
- ç•°å¸¸æ™‚ã¯å³åº§ã«å¯¾å¿œ

---

## æŠ€è¡“çš„åˆ¶ç´„ãƒ»å‰ææ¡ä»¶

### 1. GitHub Actions ã®åˆ¶ç´„
- cronã¯æœ€çŸ­ã§1åˆ†é–“éš”ï¼ˆä»Šå›ã¯ååˆ†ï¼‰
- å®Ÿè¡Œæ™‚åˆ»ã«æ•°åˆ†ã®é…å»¶ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§
- ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¯UTCã®ã¿ï¼ˆJSTã«å¤‰æ›ã—ã¦æŒ‡å®šï¼‰

### 2. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã®åˆ¶ç´„
- æ¾äº•è¨¼åˆ¸ã®HTMLæ§‹é€ ã«ä¾å­˜
- ãƒšãƒ¼ã‚¸æ§‹é€ å¤‰æ›´æ™‚ã¯ã‚³ãƒ¼ãƒ‰ä¿®æ­£ãŒå¿…è¦
- robots.txt ã¯ç¢ºèªæ¸ˆã¿ï¼ˆå•é¡Œãªã—æƒ³å®šï¼‰

### 3. LINE Notify ã®åˆ¶ç´„
- 1æ™‚é–“ã‚ãŸã‚Š1,000å›ã¾ã§ï¼ˆä»Šå›ã¯ååˆ†ï¼‰
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é•·ã¯æœ€å¤§1,000æ–‡å­—

---

## é‹ç”¨é–‹å§‹ã¾ã§ã®æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ**: GitHubä¸Šã« market ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
2. **ã‚³ãƒ¼ãƒ‰å®Ÿè£…**: å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
3. **LINE Notifyè¨­å®š**:
   - LINE Notifyã§ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
   - GitHub Secretsã«ç™»éŒ²
4. **åˆå›ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: workflow_dispatch ã§æ‰‹å‹•å®Ÿè¡Œ
5. **HTMLæ§‹é€ ç¢ºèª**: å–å¾—ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ã„ã‹ç¢ºèª
6. **æœ¬ç•ªé‹ç”¨é–‹å§‹**: cronè‡ªå‹•å®Ÿè¡Œã®ç›£è¦–é–‹å§‹
